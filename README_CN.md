![Contributor](.github/banner.png)

-----------------

# Contributor GitHub App

[English README](README.md)

âœ¨æ¬¢è¿ä½¿ç”¨Contributor GitHub Appï¼âœ¨

ç®€è€Œè¨€ä¹‹ï¼Œä¸ºäº†æ›´å¥½åœ°ç®¡ç†é¡¹ç›®ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¢å¼ºçš„Issueç®¡ç†å·¥å…·ã€‚è¿™å°±æ˜¯æˆ‘åˆ›å»ºè¿™ä¸ªé¡¹ç›®çš„åŸå› ã€‚

ğŸ¤– é€šè¿‡é…ç½®ä»“åº“æ–‡ä»¶ä¸­çš„æœºå™¨äººï¼Œå¤§å®¶å¯ä»¥è‡ªç”±å®šåˆ¶æœºå™¨äººçš„è¡Œä¸ºã€‚æœºå™¨äººå°†æ ¹æ®é…ç½®æ–‡ä»¶è‡ªåŠ¨å¤„ç†ä»“åº“äº‹ä»¶ã€‚

ğŸ‡ è¿™ä¸ªé¡¹ç›®çš„çµæ„Ÿæ¥è‡ª[https://github.com/coderabbitai/ai-pr-reviewer/](https://github.com/coderabbitai/ai-pr-reviewer/)
ã€‚ç„¶è€Œï¼Œå¾ˆé—æ†¾ä»–ä»¬å†³å®šå…³é—­ä»–ä»¬çš„å­˜å‚¨åº“å’Œä»£ç ã€‚ä½¿ç”¨å®ƒéœ€è¦é¢å¤–çš„è´¹ç”¨ï¼Œè™½ç„¶ä»˜è´¹æ˜¯å¿…è¦çš„ï¼Œä½†æˆ‘ä¸å–œæ¬¢å°é—­çš„ç³»ç»Ÿå’ŒæŒ‰æœˆè®¡è´¹ã€‚æˆ‘æ›´å–œæ¬¢å¼€æ”¾çš„ã€æŒ‰éœ€ä»˜è´¹çš„ï¼ˆæˆ–è‡ªæ‰˜ç®¡ï¼‰çš„æœåŠ¡ã€‚

ğŸš€ æœ¬ä»“åº“åŒ…æ‹¬ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¨¡æ¿ï¼Œæ‚¨å¯ä»¥ç”¨å®ƒæ¥è®¾ç½®æ‚¨çš„æœºå™¨äººã€‚å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯å¯ä»¥é€šè¿‡æˆ‘çš„é¢æ¿é…ç½®ã€‚

[**å®‰è£…åˆ°ä½ çš„ä»“åº“**](https://github.com/apps/neutron-nerve)

[**è®¿é—®ä»ªè¡¨æ¿**](https://contributor.dianas.cyou)

[**AIæœåŠ¡èšåˆç«™**](https://www.ohmygpt.com/)

## åŠŸèƒ½

| åŠŸèƒ½                 | æè¿°                    | ç›¸å…³é…ç½®                      |
|--------------------|-----------------------|---------------------------|
| ğŸŒ **ä»ªè¡¨æ¿**         | ç”¨äºç®¡ç†æ•æ„Ÿæ•°æ®å’Œå¯†é’¥é…ç½®çš„ç›´è§‚ç½‘é¡µé¢æ¿ã€‚ | -                         |
| ğŸ“‚ **è‡ªåŠ¨æ ‡ç­¾**        | æ ¹æ®é…ç½®æ–‡ä»¶è‡ªåŠ¨ç»™é—®é¢˜æ‰“æ ‡ç­¾ã€‚       | `issue_auto_label`        |
| ğŸ—‚ ~~**é—®é¢˜æ€»ç»“**~~    | æ ¹æ®é…ç½®æ–‡ä»¶ç”Ÿæˆé—®é¢˜çš„æ€»ç»“ã€‚        | -                         |
| ğŸ“ ~~**é—®é¢˜å…³é—­æŠ¥å‘Š**~~  | å½“é—®é¢˜å…³é—­æ—¶ç”ŸæˆæŠ¥å‘Šã€‚           | `issue_close_with_report` |
| ğŸ“¦ ~~**å‘å¸ƒè¯´æ˜**~~    | æ ¹æ®é…ç½®æ–‡ä»¶ç”Ÿæˆå‘å¸ƒè¯´æ˜ã€‚         | -                         |
| ğŸ“š ~~**æ–‡æ¡£ç¿»è¯‘**~~    | è‡ªåŠ¨ç¿»è¯‘æ–‡æ¡£ã€‚               | -                         |
| ğŸ“Œ ~~**é—®é¢˜æ ‡é¢˜æ ‡å‡†åŒ–**~~ | æ ‡å‡†åŒ–é—®é¢˜æ ‡é¢˜ã€‚              | `issue_auto_tidy`         |

## å¦‚ä½•ä½¿ç”¨

1. **å®‰è£…åº”ç”¨**ï¼šå°†åº”ç”¨å®‰è£…åˆ°æ‚¨çš„ä»“åº“ã€‚
2. **è·å–ä»“åº“Token**ï¼šå°†APIå¯†é’¥å’Œå…¶ä»–æ•æ„Ÿä¿¡æ¯æ·»åŠ åˆ°[ä»ªè¡¨æ¿](https://contributor.dianas.cyou)ã€‚
3. **æ„å»º `.nerve.toml` æ–‡ä»¶**ï¼šæ ¹æ®æ¨¡æ¿åˆ›å»ºé…ç½®æ–‡ä»¶ã€‚[ç¤ºä¾‹](.nerve.toml)

> **æ³¨æ„**ï¼šæ­¤é¢æ¿ä»…ç”¨äºå­˜å‚¨ä¸APIç›¸å…³çš„å¯†é’¥ã€‚æ‚¨å°†UUIDå¡«å†™åˆ°æ‚¨çš„ä»“åº“ä¸­ï¼ŒGithubAppä¸ä»“åº“åˆä½œæœ€ç»ˆè·å–è‡ªå®šä¹‰é…ç½®ã€‚

```mermaid
sequenceDiagram
    participant ç”¨æˆ·
    participant ä»ªè¡¨æ¿
    participant ä»“åº“
    participant GithubApp
    participant æœºå™¨äºº
    ç”¨æˆ· ->> ä»ªè¡¨æ¿: æä¾›æ•æ„Ÿä¿¡æ¯
    ä»ªè¡¨æ¿ ->> ç”¨æˆ·: è¿”å›UUID
    ç”¨æˆ· ->> ä»“åº“: æä¾›UUID
    ä»“åº“ ->> GithubApp: æä¾›UUIDå¹¶è¯·æ±‚æ“ä½œ
    GithubApp ->> æœºå™¨äºº: éªŒè¯ä»“åº“çš„UUID
    æœºå™¨äºº ->> GithubApp: ç¡®è®¤ä»“åº“æœ‰æ•ˆæ€§
    GithubApp -->> ä»“åº“: æ‰§è¡Œæ“ä½œ
```

## å®šåˆ¶æ“ä½œ

çœ‹èµ·æ¥é¡¹ç›®å¾ˆå¤æ‚ï¼Œå…¶å®å¾ˆç®€å•å°±èƒ½æ·»åŠ ä¸€äº›æ–°æ“ä½œï¼ŒGithub é€šè¿‡ Webhook ä¼ é€’çš„äº‹ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦å¤„ç†è¿™äº›äº‹ä»¶ï¼Œç„¶åæ‰§è¡Œæˆ‘ä»¬çš„æ“ä½œã€‚

è¯·ä½ æ‰“å¼€ [main.py](main.py) æ–‡ä»¶ï¼Œç„¶åæ·»åŠ ä½ çš„æ“ä½œã€‚

ä¸€ä»½æ–°çš„ç›‘å¬ä¾‹å­ï¼š

```python
webhook_handler = ...
git_integration = ...
get_repo_setting = ...
logger = ...
from webhook.event.issue_comment import CreateIssueCommentEvent
from webhook.event_type import IssueComment


@webhook_handler.listen(IssueComment, action=IssueComment.CREATED, unique_id="uuid")
async def handle_issue_comment(event: CreateIssueCommentEvent):
    logger.info("Received IssueComment.CREATED event")
    repo_setting = get_repo_setting(
        repo_name=event.repository.full_name,
        repo=event.repository.get_repo(git_integration)
    )
    # repo_setting å°±æ˜¯ .nerve.toml æ–‡ä»¶çš„å†…å®¹æ¨¡å‹
    issue = event.repository.get_issue(integration=git_integration, issue_number=event.issue.number)
    comment = issue.create_comment(f"Hello World!")
    issue.get_comment(comment.id).edit("Hello World! Edited")
    print(f"Issue: {event.issue.title}")
    print(f"Comment: {event.comment.body}")
    print(f"Repo: {event.repository.full_name}")
```

åŒæ ·çš„äº‹ä»¶å¯ä»¥æœ‰å¤šä¸ªç›‘å¬å™¨ï¼Œåªè¦ä½ çš„ç›‘å¬å™¨æœ‰ä¸åŒçš„ `unique_id`ã€‚

## éƒ¨ç½²åº”ç”¨

æŒ‰ä»¥ä¸‹ç®€å•æ­¥éª¤åœ¨æœ¬åœ°éƒ¨ç½²åº”ç”¨ï¼š

```shell
pdm install
npm install
cp .env.example .env
nano .env
pm2 start pm2.json
```

## è‡´è°¢

ç‰¹åˆ«æ„Ÿè°¢ä»¥ä¸‹èµ„æºä½¿è¿™ä¸ªé¡¹ç›®æˆä¸ºå¯èƒ½ï¼š

- [chmouel/gosmee](https://github.com/chmouel/gosmee)
- [octokit/webhooks](https://github.com/octokit/webhooks/blob/main/payload-examples/api.github.com/issues/assigned.payload.json)
- [GitHub Webhooks Documentation](https://docs.github.com/en/webhooks/webhook-events-and-payloads#issues)
- [GitHub Webhooks Validation](https://docs.github.com/zh/webhooks/using-webhooks/validating-webhook-deliveries)
- [PyGithub Examples](https://github.com/PyGithub/PyGithub/blob/main/doc/examples/Issue.rst)

## è®¸å¯è¯

è¿™ä¸ªé¡¹ç›®æ²¡æœ‰è®¸å¯è¯ã€‚

## è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹æˆ‘ä»¬çš„[è´¡çŒ®æŒ‡å—](CONTRIBUTOR_LICENSE_AGREEMENT.md)äº†è§£æ›´å¤šä¿¡æ¯ã€‚

## â­ï¸ ç»™æˆ‘ä»¬åŠ æ˜Ÿ

å¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªé¡¹ç›®æœ‰å¸®åŠ©ï¼Œä¸è¦å¿˜è®°ç»™æˆ‘ä»¬åŠ æ˜Ÿï¼â­ï¸
